<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Callbacks & JSON</title>

  </head>
  <body>

    <p>Empty HTML doc :) Some JS is running. Save me to your machine.</p>

    <script>
    // Save a copy of this file to your machine.
    // Open the file in your editor.
    // Examine the code. Think about what might happen when you run the file.
    // Open the file in your browser to validate your expectations.
    // With console open, refresh and you should see a response object after a second or two.
    // Examine the response object in console, find the property which contains the response JSON.
    // Update your console.log to log only the response JSON, not the entire object.
    // Create a new function: parseRandomUser
    // Update your code to use a callback i.e. pass getRandomUser the parseRandomUser function. 
    // Your goal is to get parseRandomUser logging the random user details.
    // Read about error-first callbacks. Can you implement error handling? The Random User request might 
    // not always respond the way we expect.


    // Beast Mode
    // Display random user details in the browser
    // Add a button to grab a new random user

    // Beast Mode++
    // Learn more about callbacks: http://callbackhell.com/
    // Look under the hood: What the heck is the event loop anyway?

    // recieve the parseRandomUser and store in variable parser
    getRandomUser = (parser) => {
      // This function uses AJAX to hit the random user API.
      // More info: https://randomuser.me

      var request = new XMLHttpRequest();
      request.open('GET', 'https://randomuser.me/api/', true);
      request.onload = function () {
        /* You'll start here */
        console.log(request.response);
        // executes parseRandomUser from the variable parser
        parser(request.response)
      };
      request.send();
    }

    // recieves the request.response and stores in the variable user
    parseRandomUser = (user) => {
    // Your goal is to get parseRandomUser logging the random user details.
      console.log(user)
    }

    // pass in the parseRandomUser function on execution
    getRandomUser(parseRandomUser); // Execute the function
    </script>
  </body>
</html>
